extends ../layout

block content
  .page-header
      h1 Add book
      p.lead Add a book to your collection
  div(ng-app='bookApp')
    form.form-horizontal(method='POST', action='/new', ng-controller='BookController')
      input(type='hidden', name='_csrf', value=_csrf)
      input(type='text', style='display: none')
      .form-group
        label.col-sm-3.control-label(for='Title') Title
        .col-sm-5
          input.form-control(ng-model='title', type='title', name='title', id='title', autofocus, required)
        button.btn.btn-primary(type='button', ng-click='searchBook()') Search
      h4(ng-if='books.length') Select from one of the following:
      #book-list(ng-if='books.length')
        .col-md-2.book(ng-repeat='book in books' ng-click='updateBook(book)')
          img(ng-src='{{book.volumeInfo.imageLinks.thumbnail}}')
      .form-group(ng-if='books.length')
        label.col-sm-3.control-label(for='Author') Author
        .col-sm-7
          input.form-control(type='author', name='author', id='author', value='{{bk.volumeInfo.authors[0]}}', required)
      .form-group(ng-if='books.length')  
        label.col-sm-3.control-label(for='Description') Description
        .col-sm-7
          textarea.form-control(type='owner_description', name='owner_description', id='owner_description', placeholder='Description', required)
      .form-group(ng-if='books.length')
        label.col-sm-3.control-label(for='Trade') Do you want to put this book up for trade?
        .col-sm-6
          label.radio.col-sm-3
            input(type='radio', name='tradestatus', value='1', data-toggle='radio')
            span Yes
          label.radio.col-sm-3
            input(type='radio', name='tradestatus', value='0', data-toggle='radio')
            span No
        input.form-control(type='hidden', name='imageURL', id='imageURL', value='{{bk.volumeInfo.imageLinks.thumbnail}}')
        input.form-control(type='hidden', name='description', id='description', value='{{bk.volumeInfo.description}}')
        input.form-control(type='hidden', name='rating', id='rating', value='{{bk.volumeInfo.averageRating}}')
      .form-group(ng-if='books.length')
        .col-sm-offset-3.col-sm-7
          button.btn.btn-success(type='submit')
            i.fa.fa-user-plus
            | Add